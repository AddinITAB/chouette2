<%= title_tag t('routing_constraints.index.title') %>

<% if @routing_constraints.any? %>
  <%= render 'routing_constraints/routing_constraint' %>
  <table class="table table-striped table-condensed">
    <thead>
      <tr>
        <th><%= t('activerecord.attributes.routing_constraint.name') %></th>
        <th><%= t('activerecord.attributes.routing_constraint.comment') %></th>
        <th><%= t('activerecord.attributes.routing_constraint.lines') %></th>
        <th><%= t('activerecord.attributes.routing_constraint.stop_areas') %></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @routing_constraints.each do |routing_constraint| %>
        <tr>
          <td><%= link_to routing_constraint.name, referential_routing_constraint_path(@referential, routing_constraint) %></td>
          <td><%= routing_constraint.comment %></td>
          <td><%= routing_constraint.lines.map(&:name).join('<br>').html_safe %></td>
          <td>
            <% routing_constraint.stop_areas.each do |sa| %>
              <%= image_tag stop_area_picture_url(sa) %>
              <%= sa.name %>
              <br>
            <% end %>
          </td>
          <td>
            <%= link_to '', edit_referential_routing_constraint_path(@referential, routing_constraint), :class => "edit" %>
            <%= link_to '', referential_timeband_path(@referential, routing_constraint), :method => :delete, :data => {:confirm =>  t('routing_constraints.actions.destroy_confirm')}, :class => "remove" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>

<%= render 'sidebar' %>
